<%= autogenerated %>
package <%= project_defn.databases_namespace %>;

import com.rapleaf.java_active_record.DatabaseConnection;
<% project_defn.databases.each do |db| %>
import <%= db.namespace %>.I<%= db.name %>;
import <%= db.namespace %>.impl.<%= db.name %>Impl;
<% end %>

public class DatabasesImpl implements IDatabases {
  <% project_defn.databases.each do |db| %>
  private final I<%= db.name %> <%= db.name.underscore %>;
  <% end %>

  public DatabasesImpl(<%= project_defn.databases.map{|db| ["DatabaseConnection", db.connection_name].join(" ")}.join(", ") %>) {
    <% project_defn.databases.each do |db| %>
    this.<%= db.name.underscore %> = new <%= db.name %>Impl(<%= db.connection_name %>, this);
    <% end %>
  }

  public DatabasesImpl() {
    <% project_defn.databases.each do |db| %>
    this.<%= db.name.underscore %> = new <%= db.name %>Impl(new DatabaseConnection("<%= db.name.downcase.sub(/sprucedb/, "spruce_db") %>"), this);
    <% end %>
  }

  <% project_defn.databases.each do |db| %>

  public I<%= db.name %> <%= db.getter %> {
    return <%= db.name.underscore %>;
  }
  <% end %>
}
